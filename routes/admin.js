const _0x111fac=_0x1f1a;function _0x1f1a(_0x935bad,_0x388585){const _0x24047f=_0x2404();return _0x1f1a=function(_0x1f1a31,_0x1bae33){_0x1f1a31=_0x1f1a31-0xe8;let _0x4c27bf=_0x24047f[_0x1f1a31];return _0x4c27bf;},_0x1f1a(_0x935bad,_0x388585);}(function(_0xaa9d1c,_0x5ed878){const _0x18d692=_0x1f1a,_0x169f96=_0xaa9d1c();while(!![]){try{const _0xbc8d8d=parseInt(_0x18d692(0xf5))/0x1*(parseInt(_0x18d692(0x156))/0x2)+parseInt(_0x18d692(0x10f))/0x3+-parseInt(_0x18d692(0x158))/0x4*(parseInt(_0x18d692(0xfe))/0x5)+parseInt(_0x18d692(0x10a))/0x6+-parseInt(_0x18d692(0x11b))/0x7+-parseInt(_0x18d692(0x143))/0x8+parseInt(_0x18d692(0xea))/0x9;if(_0xbc8d8d===_0x5ed878)break;else _0x169f96['push'](_0x169f96['shift']());}catch(_0x49c52a){_0x169f96['push'](_0x169f96['shift']());}}}(_0x2404,0x2efdb));const express=require(_0x111fac(0xeb)),router=express['Router'](),mongoose=require('mongoose');require(_0x111fac(0x100));const Usuario=mongoose[_0x111fac(0xee)](_0x111fac(0xf3));require(_0x111fac(0x10e));const Ferramenta=mongoose['model'](_0x111fac(0x123)),bcrypt=require(_0x111fac(0x10b)),passport=require(_0x111fac(0x107)),{admin}=require('../helpers/administrador'),Schema=mongoose[_0x111fac(0xfd)];require(_0x111fac(0x14b));const DadosTeste=mongoose[_0x111fac(0xee)](_0x111fac(0x154));function _0x2404(){const _0x5e969e=['adicionando\x205...','gv8','nivel','redirect','Houve\x20um\x20erro\x20durante\x20o\x20salvamento\x20do\x20usuário','Houve\x20um\x20erro\x20interno','/edituser','userLogin','/adduser','/wifi','O\x20usuário\x20selecionado\x20não\x20pode\x20ser\x20excluido','setor','populate','_id','admin/editar','gv3','configuracoes','/todasgvhistorico','desc','Já\x20existe\x20uma\x20conta\x20registrada\x20com\x20esse\x20login','nome','gv7','admin/edituser','render','post','rfid','/admin/useroptions','1246520OaJNbG','then','/acessoremoto','Senha\x20inválida','Lista\x20de\x20configurações\x20vazia...','gv6','Usuario\x20criado\x20com\x20sucesso!','/edituser/deletar','../models/DadosTeste','Nome\x20inválido','Setor\x20inválido','forEach','admin/todasgavetas','findOne','gv5','/options','log','dadosTestes','Houve\x20um\x20erro\x20ao\x20criar\x20o\x20usuário,\x20tente\x20novamente','8guxrho','gv2','82580PTpDMi','hash','Houve\x20um\x20erro\x20ao\x20salvar\x20o\x20usuário,\x20tente\x20novamente','O\x20login\x20deve\x20conter\x20no\x20máximo\x2015\x20caracteres','/admin/edituser','gv4','A\x20senha\x20deve\x20conter\x20apenas\x20números','3311820WZAuCJ','express','/admin/adduser','/testes','model','/404?data=','error_msg','admin/adduser','/useroptions','usuarios','nivel:\x20','28631rxNTli','sort','signal_level','push','admin/atualizacao','Este\x20usuario\x20não\x20existe','exports','senha','Schema','75dviptQ','Erro\x20ao\x20editar\x20o\x20usuario:\x20','../models/Usuario','node-wifi','gv1','Nenhum\x20usuário\x20selecionado','ssid','scan','admin/edituser/','passport','Houve\x20um\x20erro\x20ao\x20deletar\x20o\x20usuário','get','1034016yivJDO','bcryptjs','flash','../models/Configuracoes','../models/Ferramenta','1127658kCggHW','frequency','Login\x20inválido','admin/gavetaespecifica','Usuario\x20editado\x20com\x20sucesso!','success_msg','find','000000000000000000000001','admin/todasgvhistorico','genSalt','length','Já\x20existe\x20uma\x20conta\x20registrada\x20com\x20esse\x20cartão\x20RFID','2609327klOvMR','/atualizacao','login','A\x20senha\x20deve\x20conter\x204\x20caracteres','admin/gvespecificahistorico','admin/wifi','admin/useroptions','body','ferramentas','admin/options','lean','catch','security'];_0x2404=function(){return _0x5e969e;};return _0x2404();}require(_0x111fac(0x10d));const Configuracao=mongoose[_0x111fac(0xee)]('configuracoes'),wifi=require(_0x111fac(0x101));wifi['init']({'iface':null}),router[_0x111fac(0x109)](_0x111fac(0xf2),admin,(_0x2de38d,_0x1f049a)=>{const _0x10c1e0=_0x111fac;_0x1f049a[_0x10c1e0(0x13f)](_0x10c1e0(0x121));}),router[_0x111fac(0x109)](_0x111fac(0x145),admin,(_0x196594,_0x34537a)=>{const _0x9f21d=_0x111fac;_0x34537a[_0x9f21d(0x13f)]('admin/acessoremoto');}),router[_0x111fac(0x109)](_0x111fac(0x152),admin,(_0x189859,_0x279295)=>{const _0x2df1b8=_0x111fac;Configuracao['findOne']({'_id':_0x2df1b8(0x116)})[_0x2df1b8(0x125)]()[_0x2df1b8(0x134)](_0x2df1b8(0x138))[_0x2df1b8(0x144)](_0x267b04=>{const _0x4b29f5=_0x2df1b8;if(_0x267b04)_0x279295[_0x4b29f5(0x13f)]('admin/options',{'configuracoes':_0x267b04});else{console[_0x4b29f5(0x153)](_0x4b29f5(0x147));const _0x32fad4={'fechamento':0x0,'cartao':0x0,'desligamento':0x0,'email':'-','dataRelatorio':'0'};_0x279295[_0x4b29f5(0x13f)](_0x4b29f5(0x124),{'configuracoes':_0x32fad4});}})[_0x2df1b8(0x126)](_0x211506=>{const _0x5de912=_0x2df1b8;_0x189859[_0x5de912(0x10c)]('error_msg',_0x5de912(0x12d)),_0x279295[_0x5de912(0x12b)]('/404?data='+_0x211506);});}),router[_0x111fac(0x109)](_0x111fac(0xed),admin,(_0x242c61,_0x1af78e)=>{const _0x2ef29b=_0x111fac;_0x1af78e[_0x2ef29b(0x13f)]('admin/testes');}),router['get'](_0x111fac(0x11c),admin,(_0x29c563,_0x420d27)=>{const _0x354c5f=_0x111fac;_0x420d27[_0x354c5f(0x13f)](_0x354c5f(0xf9));}),router[_0x111fac(0x109)](_0x111fac(0x131),admin,(_0x37d3f2,_0x188583)=>{wifi['getCurrentConnections']((_0x533325,_0x1cbc0b)=>{const _0x557006=_0x1f1a;if(_0x1cbc0b[_0x557006(0x119)]>0x0){var _0x616209=String(_0x1cbc0b[0x0][_0x557006(0x110)]);_0x1cbc0b[0x0][_0x557006(0x110)]=_0x616209[0x0]+','+_0x616209[0x1];if(_0x1cbc0b[0x0][_0x557006(0xf7)]>=-0x3c)_0x1cbc0b[0x0][_0x557006(0xf7)]=0x4;else{if(_0x1cbc0b[0x0][_0x557006(0xf7)]>=-0x46)_0x1cbc0b[0x0][_0x557006(0xf7)]=0x3;else{if(_0x1cbc0b[0x0][_0x557006(0xf7)]>=-0x50)_0x1cbc0b[0x0]['signal_level']=0x2;else _0x1cbc0b[0x0]['signal_level']=0x1;}}_0x188583['render'](_0x557006(0x120),{'network':_0x1cbc0b['slice'](0x0,0x1),'conectado':0x1});}else wifi[_0x557006(0x105)]((_0x5f3b77,_0x10a49f)=>{const _0x40e6ce=_0x557006;if(_0x5f3b77)console[_0x40e6ce(0x153)](_0x5f3b77);else _0x188583['render']('admin/wifi',{'network':agrupaWifi(_0x10a49f),'conectado':0x0});});});});function agrupaWifi(_0x8fe14){var _0x2acc07=new Array(),_0x24020e=0x0;return _0x8fe14['forEach'](function(_0x4dd12e,_0x54b459){const _0x5dfa6e=_0x1f1a;if(_0x4dd12e[_0x5dfa6e(0xf7)]>=-0x3c)_0x4dd12e['signal_level']=0x4;else{if(_0x4dd12e['signal_level']>=-0x46)_0x4dd12e['signal_level']=0x3;else{if(_0x4dd12e[_0x5dfa6e(0xf7)]>=-0x50)_0x4dd12e[_0x5dfa6e(0xf7)]=0x2;else _0x4dd12e[_0x5dfa6e(0xf7)]=0x1;}}var _0x249c63=0x0;_0x2acc07[_0x5dfa6e(0x14e)](function(_0x30a70f,_0x270931){const _0x33f802=_0x5dfa6e;if(_0x30a70f[_0x33f802(0x104)]==_0x4dd12e[_0x33f802(0x104)]){_0x249c63=0x1;if(_0x4dd12e[_0x33f802(0xf7)]>_0x30a70f[_0x33f802(0xf7)])_0x30a70f[_0x33f802(0xf7)]=_0x4dd12e[_0x33f802(0xf7)];}}),_0x249c63==0x0&&(_0x2acc07[_0x24020e]={'ssid':_0x4dd12e[_0x5dfa6e(0x104)],'security':_0x4dd12e[_0x5dfa6e(0x127)],'signal_level':_0x4dd12e[_0x5dfa6e(0xf7)]},_0x24020e=_0x24020e+0x1);}),console['log'](_0x2acc07),_0x2acc07;}router[_0x111fac(0x109)]('/gavetaespecifica',admin,(_0x1f1760,_0x29dfe8)=>{const _0x5d12b6=_0x111fac;_0x29dfe8[_0x5d12b6(0x13f)](_0x5d12b6(0x112));}),router['get']('/gvespecificahistorico',admin,(_0x4da84b,_0x15cbcc)=>{const _0x1fb9c4=_0x111fac;DadosTeste[_0x1fb9c4(0x115)]({'tipo':0x0})[_0x1fb9c4(0x125)]()[_0x1fb9c4(0x134)](_0x1fb9c4(0x154))[_0x1fb9c4(0xf6)]({'_id':_0x1fb9c4(0x13a)})[_0x1fb9c4(0x144)](_0x2b3ba9=>{const _0x4df268=_0x1fb9c4;_0x15cbcc[_0x4df268(0x13f)](_0x4df268(0x11f),{'eventos':_0x2b3ba9});})[_0x1fb9c4(0x126)](_0x5d9b1b=>{const _0x1a6a8a=_0x1fb9c4;_0x4da84b['flash']('error_msg',_0x1a6a8a(0x12d)),_0x15cbcc[_0x1a6a8a(0x12b)](_0x1a6a8a(0xef)+_0x5d9b1b);});}),router[_0x111fac(0x109)](_0x111fac(0x139),admin,(_0xd6465e,_0x395059)=>{const _0x2c0809=_0x111fac;DadosTeste[_0x2c0809(0x115)]({'tipo':0x1})['lean']()[_0x2c0809(0x134)]('dadosTestes')[_0x2c0809(0xf6)]({'_id':_0x2c0809(0x13a)})[_0x2c0809(0x144)](_0xeb32d3=>{const _0x220a83=_0x2c0809;_0x395059[_0x220a83(0x13f)](_0x220a83(0x117),{'eventos':_0xeb32d3});})[_0x2c0809(0x126)](_0x8e6e96=>{const _0x3d0d87=_0x2c0809;_0xd6465e[_0x3d0d87(0x10c)]('error_msg','Houve\x20um\x20erro\x20interno'),_0x395059[_0x3d0d87(0x12b)](_0x3d0d87(0xef)+_0x8e6e96);});}),router['get']('/todasgavetas',admin,(_0x518da1,_0x3bd34b)=>{const _0x1fbab=_0x111fac;_0x3bd34b['render'](_0x1fbab(0x14f));}),router[_0x111fac(0x109)]('/adduser',admin,(_0x2cd970,_0x5e7e14)=>{const _0x5a3759=_0x111fac;_0x5e7e14[_0x5a3759(0x13f)](_0x5a3759(0xf1));}),router[_0x111fac(0x109)](_0x111fac(0x12e),admin,(_0x5539ba,_0x18ae5e)=>{const _0x148517=_0x111fac;Usuario['find']()[_0x148517(0x125)]()[_0x148517(0x134)](_0x148517(0xf3))[_0x148517(0xf6)]({'login':'asc'})[_0x148517(0x144)](_0x4407b1=>{_0x18ae5e['render']('admin/edituser',{'usuarios':_0x4407b1,'busca':''});})[_0x148517(0x126)](_0x3cf74f=>{const _0x4be865=_0x148517;_0x5539ba[_0x4be865(0x10c)](_0x4be865(0xf0),_0x4be865(0x12d)),_0x18ae5e[_0x4be865(0x12b)](_0x4be865(0xef)+_0x3cf74f);});}),router['post']('/edituser/buscar',admin,(_0x2c8ed4,_0x80a97a)=>{const _0x27ed18=_0x111fac;Usuario[_0x27ed18(0x115)]({'login':new RegExp(_0x2c8ed4[_0x27ed18(0x122)][_0x27ed18(0x12f)],'i')})[_0x27ed18(0x125)]()['populate'](_0x27ed18(0xf3))[_0x27ed18(0xf6)]({'login':'asc'})[_0x27ed18(0x144)](_0x53ef1e=>{const _0x358028=_0x27ed18;_0x80a97a['render'](_0x358028(0x13e),{'usuarios':_0x53ef1e,'busca':_0x2c8ed4[_0x358028(0x122)][_0x358028(0x12f)]});})[_0x27ed18(0x126)](_0x5aa7b9=>{const _0x4ecb20=_0x27ed18;_0x2c8ed4['flash']('error_msg','Houve\x20um\x20erro\x20interno'),_0x80a97a[_0x4ecb20(0x12b)](_0x4ecb20(0xef)+_0x5aa7b9);});});function isNumber(_0xdfbcb){return!isNaN(parseFloat(_0xdfbcb))&&isFinite(_0xdfbcb);}router[_0x111fac(0x140)](_0x111fac(0x130),admin,(_0x1c5f36,_0x165081)=>{const _0x23d350=_0x111fac;var _0x92f982=[];(!_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x13c)]||typeof _0x1c5f36[_0x23d350(0x122)][_0x23d350(0x13c)]==undefined||typeof _0x1c5f36[_0x23d350(0x122)][_0x23d350(0x13c)]==null)&&_0x92f982['push']({'texto':_0x23d350(0x14c)});(!_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x133)]||typeof _0x1c5f36['body'][_0x23d350(0x133)]==undefined||typeof _0x1c5f36[_0x23d350(0x122)][_0x23d350(0x133)]==null)&&_0x92f982['push']({'texto':'Setor\x20inválido'});if(_0x1c5f36['body']['login'][_0x23d350(0x119)]>0xf)_0x92f982['push']({'texto':_0x23d350(0x15b)});else(!_0x1c5f36['body']['login']||typeof _0x1c5f36['body'][_0x23d350(0x11d)]==undefined||typeof _0x1c5f36[_0x23d350(0x122)]['login']==null)&&_0x92f982[_0x23d350(0xf8)]({'texto':_0x23d350(0x111)});if(_0x1c5f36[_0x23d350(0x122)]['senha']['length']<0x4||_0x1c5f36[_0x23d350(0x122)][_0x23d350(0xfc)][_0x23d350(0x119)]>0x4)_0x92f982[_0x23d350(0xf8)]({'texto':'A\x20senha\x20deve\x20conter\x204\x20caracteres'});else{if(!isNumber(_0x1c5f36['body'][_0x23d350(0xfc)]))_0x92f982[_0x23d350(0xf8)]({'texto':_0x23d350(0xe9)});else(!_0x1c5f36['body'][_0x23d350(0xfc)]||typeof _0x1c5f36[_0x23d350(0x122)][_0x23d350(0xfc)]==undefined||typeof _0x1c5f36[_0x23d350(0x122)][_0x23d350(0xfc)]==null)&&_0x92f982[_0x23d350(0xf8)]({'texto':_0x23d350(0x146)});}if(_0x92f982[_0x23d350(0x119)]>0x0){var _0x385638=new Schema({'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String},'gv1':{'type':Boolean},'gv2':{'type':Boolean},'gv3':{'type':Boolean},'gv4':{'type':Boolean},'gv5':{'type':Boolean},'gv6':{'type':Boolean},'gv7':{'type':Boolean},'gv8':{'type':Boolean}});_0x385638[_0x23d350(0x13c)]=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x13c)],_0x385638['setor']=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x133)],_0x385638['login']=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x11d)],_0x385638[_0x23d350(0x141)]=_0x1c5f36[_0x23d350(0x122)]['rfid'],_0x385638[_0x23d350(0x102)]=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x102)],_0x385638[_0x23d350(0x157)]=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x157)],_0x385638['gv3']=_0x1c5f36[_0x23d350(0x122)]['gv3'],_0x385638[_0x23d350(0xe8)]=_0x1c5f36[_0x23d350(0x122)]['gv4'],_0x385638['gv5']=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x151)],_0x385638[_0x23d350(0x148)]=_0x1c5f36[_0x23d350(0x122)]['gv6'],_0x385638[_0x23d350(0x13d)]=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x13d)],_0x385638[_0x23d350(0x129)]=_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x129)],_0x165081[_0x23d350(0x13f)]('admin/adduser',{'error':_0x92f982,'usuario':_0x385638});}else Usuario['findOne']({'$or':[{'login':_0x1c5f36['body'][_0x23d350(0x11d)]},{'$and':[{'rfid':_0x1c5f36[_0x23d350(0x122)][_0x23d350(0x141)]},{'rfid':{'$ne':''}}]}]})['then'](_0x3ebc49=>{const _0x2cec9c=_0x23d350;if(_0x3ebc49){if(_0x3ebc49[_0x2cec9c(0x11d)]==_0x1c5f36[_0x2cec9c(0x122)]['login']){_0x92f982[_0x2cec9c(0xf8)]({'texto':_0x2cec9c(0x13b)});var _0x46b786=new Schema({'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String},'gv1':{'type':Boolean},'gv2':{'type':Boolean},'gv3':{'type':Boolean},'gv4':{'type':Boolean},'gv5':{'type':Boolean},'gv6':{'type':Boolean},'gv7':{'type':Boolean},'gv8':{'type':Boolean}});_0x46b786[_0x2cec9c(0x13c)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x13c)],_0x46b786['setor']=_0x1c5f36[_0x2cec9c(0x122)]['setor'],_0x46b786[_0x2cec9c(0x11d)]='',_0x46b786[_0x2cec9c(0x141)]=_0x1c5f36['body']['rfid'],_0x46b786[_0x2cec9c(0x102)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x102)],_0x46b786[_0x2cec9c(0x157)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x157)],_0x46b786[_0x2cec9c(0x137)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x137)],_0x46b786[_0x2cec9c(0xe8)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0xe8)],_0x46b786[_0x2cec9c(0x151)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x151)],_0x46b786[_0x2cec9c(0x148)]=_0x1c5f36[_0x2cec9c(0x122)]['gv6'],_0x46b786[_0x2cec9c(0x13d)]=_0x1c5f36['body']['gv7'],_0x46b786[_0x2cec9c(0x129)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x129)],_0x165081['render'](_0x2cec9c(0xf1),{'error':_0x92f982,'usuario':_0x46b786});}else{console[_0x2cec9c(0x153)](_0x2cec9c(0x128)),_0x92f982['push']({'texto':_0x2cec9c(0x11a)});var _0x46b786=new Schema({'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String},'gv1':{'type':Boolean},'gv2':{'type':Boolean},'gv3':{'type':Boolean},'gv4':{'type':Boolean},'gv5':{'type':Boolean},'gv6':{'type':Boolean},'gv7':{'type':Boolean},'gv8':{'type':Boolean}});_0x46b786[_0x2cec9c(0x13c)]=_0x1c5f36[_0x2cec9c(0x122)]['nome'],_0x46b786[_0x2cec9c(0x133)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x133)],_0x46b786[_0x2cec9c(0x11d)]=_0x1c5f36[_0x2cec9c(0x122)]['login'],_0x46b786[_0x2cec9c(0x141)]='',_0x46b786[_0x2cec9c(0x102)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x102)],_0x46b786[_0x2cec9c(0x157)]=_0x1c5f36[_0x2cec9c(0x122)]['gv2'],_0x46b786[_0x2cec9c(0x137)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x137)],_0x46b786[_0x2cec9c(0xe8)]=_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0xe8)],_0x46b786[_0x2cec9c(0x151)]=_0x1c5f36['body'][_0x2cec9c(0x151)],_0x46b786[_0x2cec9c(0x148)]=_0x1c5f36[_0x2cec9c(0x122)]['gv6'],_0x46b786[_0x2cec9c(0x13d)]=_0x1c5f36['body'][_0x2cec9c(0x13d)],_0x46b786[_0x2cec9c(0x129)]=_0x1c5f36['body'][_0x2cec9c(0x129)],_0x165081[_0x2cec9c(0x13f)](_0x2cec9c(0xf1),{'error':_0x92f982,'usuario':_0x46b786});}}else{const _0x2b04db=new Usuario({'nome':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x13c)],'setor':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x133)],'login':_0x1c5f36['body'][_0x2cec9c(0x11d)],'senha':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0xfc)],'rfid':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x141)],'gv1':_0x1c5f36['body'][_0x2cec9c(0x102)],'gv2':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x157)],'gv3':_0x1c5f36[_0x2cec9c(0x122)]['gv3'],'gv4':_0x1c5f36['body']['gv4'],'gv5':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x151)],'gv6':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x148)],'gv7':_0x1c5f36[_0x2cec9c(0x122)]['gv7'],'gv8':_0x1c5f36[_0x2cec9c(0x122)][_0x2cec9c(0x129)]});bcrypt['genSalt'](0xa,(_0x112959,_0x125237)=>{const _0x5115b6=_0x2cec9c;bcrypt[_0x5115b6(0x159)](_0x2b04db[_0x5115b6(0xfc)],_0x125237,(_0x1e56fd,_0x4ae3e6)=>{const _0x23fd96=_0x5115b6;_0x1e56fd&&(_0x1c5f36[_0x23fd96(0x10c)](_0x23fd96(0xf0),_0x23fd96(0x12c)),_0x165081[_0x23fd96(0x12b)]('/')),_0x2b04db['senha']=_0x4ae3e6,_0x2b04db['save']()[_0x23fd96(0x144)](()=>{const _0x59f469=_0x23fd96;_0x1c5f36[_0x59f469(0x10c)](_0x59f469(0x114),_0x59f469(0x149)),_0x165081[_0x59f469(0x12b)](_0x59f469(0x142));})[_0x23fd96(0x126)](_0x31195f=>{const _0x2286a7=_0x23fd96;_0x1c5f36[_0x2286a7(0x10c)](_0x2286a7(0xf0),_0x2286a7(0x155)),_0x165081[_0x2286a7(0x12b)](_0x2286a7(0xec));});});});}})['catch'](_0x3f393f=>{const _0x1c71de=_0x23d350;_0x1c5f36[_0x1c71de(0x10c)](_0x1c71de(0xf0),'Houve\x20um\x20erro\x20interno'),_0x165081['redirect']('/');});}),router[_0x111fac(0x140)]('/edituser/editar',admin,(_0x1d8a30,_0x3ff4c5)=>{const _0xc9166b=_0x111fac;!_0x1d8a30[_0xc9166b(0x122)]['log']?(_0x1d8a30[_0xc9166b(0x10c)](_0xc9166b(0xf0),_0xc9166b(0x103)),_0x3ff4c5[_0xc9166b(0x12b)]('/admin/edituser')):Usuario['findOne']({'login':_0x1d8a30['body'][_0xc9166b(0x153)]})[_0xc9166b(0x125)]()[_0xc9166b(0x144)](_0x37c5d5=>{const _0x2d4956=_0xc9166b;!_0x37c5d5?_0x3ff4c5[_0x2d4956(0x13f)](_0x2d4956(0x106),{'error':error}):_0x3ff4c5['render'](_0x2d4956(0x136),{'usuario':_0x37c5d5});})['catch'](_0x190b0d=>{const _0x276c30=_0xc9166b;_0x1d8a30[_0x276c30(0x10c)](_0x276c30(0xf0),_0x276c30(0xfa)),_0x3ff4c5[_0x276c30(0x12b)](_0x276c30(0x15c));});}),router['post'](_0x111fac(0x14a),admin,(_0x5c6e4a,_0x61ceda)=>{const _0x57fb81=_0x111fac;!_0x5c6e4a[_0x57fb81(0x122)]['log']?(_0x5c6e4a[_0x57fb81(0x10c)]('error_msg','Nenhum\x20usuário\x20selecionado'),_0x61ceda[_0x57fb81(0x12b)]('/admin/edituser')):_0x5c6e4a[_0x57fb81(0x122)][_0x57fb81(0x12a)]!='2'?(console['log'](_0x57fb81(0xf4)+_0x5c6e4a[_0x57fb81(0x122)][_0x57fb81(0x12a)]),Usuario['remove']({'login':_0x5c6e4a[_0x57fb81(0x122)]['log']})[_0x57fb81(0x144)](()=>{const _0xc93b0a=_0x57fb81;_0x5c6e4a[_0xc93b0a(0x10c)](_0xc93b0a(0x114),'Usuario\x20deletado\x20com\x20sucesso!'),_0x61ceda[_0xc93b0a(0x12b)](_0xc93b0a(0x15c));})[_0x57fb81(0x126)](_0x3ee1f4=>{const _0x1025a4=_0x57fb81;_0x5c6e4a[_0x1025a4(0x10c)](_0x1025a4(0xf0),_0x1025a4(0x108)),_0x61ceda[_0x1025a4(0x12b)](_0x1025a4(0x15c));})):(_0x5c6e4a[_0x57fb81(0x10c)](_0x57fb81(0xf0),_0x57fb81(0x132)),_0x61ceda['redirect'](_0x57fb81(0x15c)));}),router[_0x111fac(0x140)]('/edituser/editar/salvar',admin,(_0x5bd716,_0x28a8ee)=>{const _0x5844e2=_0x111fac;var _0x4a6a45=[],_0x3d02cf=0x0;(!_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x13c)]||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x13c)]==undefined||typeof _0x5bd716['body'][_0x5844e2(0x13c)]==null)&&_0x4a6a45[_0x5844e2(0xf8)]({'texto':'Nome\x20inválido'});(!_0x5bd716['body'][_0x5844e2(0x133)]||typeof _0x5bd716['body']['setor']==undefined||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x133)]==null)&&_0x4a6a45[_0x5844e2(0xf8)]({'texto':_0x5844e2(0x14d)});if(_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x11d)][_0x5844e2(0x119)]>0xf)_0x4a6a45['push']({'texto':_0x5844e2(0x15b)});else(!_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x11d)]||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x11d)]==undefined||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x11d)]==null)&&_0x4a6a45['push']({'texto':'Login\x20inválido'});if(_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0xfc)][_0x5844e2(0x119)]==0x0)_0x3d02cf=0x1;else{if(_0x5bd716['body']['senha'][_0x5844e2(0x119)]<0x4||_0x5bd716[_0x5844e2(0x122)]['senha']['length']>0x4)_0x4a6a45[_0x5844e2(0xf8)]({'texto':_0x5844e2(0x11e)});else{if(!isNumber(_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0xfc)]))_0x4a6a45[_0x5844e2(0xf8)]({'texto':_0x5844e2(0xe9)});else(!_0x5bd716['body']['senha']||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0xfc)]==undefined||typeof _0x5bd716[_0x5844e2(0x122)][_0x5844e2(0xfc)]==null)&&_0x4a6a45['push']({'texto':_0x5844e2(0x146)});}}if(_0x4a6a45[_0x5844e2(0x119)]>0x0){var _0x290564=new Schema({'_id':{'type':String},'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String}});_0x290564[_0x5844e2(0x135)]=_0x5bd716[_0x5844e2(0x122)]['id'],_0x290564[_0x5844e2(0x13c)]=_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x13c)],_0x290564[_0x5844e2(0x133)]=_0x5bd716['body'][_0x5844e2(0x133)],_0x290564[_0x5844e2(0x11d)]=_0x5bd716[_0x5844e2(0x122)]['login'],_0x290564[_0x5844e2(0x141)]=_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x141)],_0x290564['gv1']=_0x5bd716[_0x5844e2(0x122)]['gv1'],_0x290564[_0x5844e2(0x157)]=_0x5bd716[_0x5844e2(0x122)]['gv2'],_0x290564[_0x5844e2(0x137)]=_0x5bd716['body'][_0x5844e2(0x137)],_0x290564['gv4']=_0x5bd716[_0x5844e2(0x122)]['gv4'],_0x290564[_0x5844e2(0x151)]=_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x151)],_0x290564[_0x5844e2(0x148)]=_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x148)],_0x290564['gv7']=_0x5bd716['body']['gv7'],_0x290564[_0x5844e2(0x129)]=_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x129)],_0x28a8ee[_0x5844e2(0x13f)](_0x5844e2(0x136),{'error':_0x4a6a45,'usuario':_0x290564});}else Usuario[_0x5844e2(0x150)]({'$or':[{'$and':[{'_id':{'$ne':_0x5bd716[_0x5844e2(0x122)]['id']}},{'login':_0x5bd716[_0x5844e2(0x122)][_0x5844e2(0x11d)]}]},{'$and':[{'_id':{'$ne':_0x5bd716['body']['id']}},{'rfid':_0x5bd716['body'][_0x5844e2(0x141)]},{'rfid':{'$ne':''}}]}]})['then'](_0x4e6841=>{const _0x5c89da=_0x5844e2;if(_0x4e6841){if(_0x4e6841[_0x5c89da(0x11d)]==_0x5bd716['body'][_0x5c89da(0x11d)]){_0x4a6a45[_0x5c89da(0xf8)]({'texto':_0x5c89da(0x13b)});var _0x14187c=new Schema({'_id':{'type':String},'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String}});_0x14187c[_0x5c89da(0x135)]=_0x5bd716['body']['id'],_0x14187c[_0x5c89da(0x13c)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x13c)],_0x14187c[_0x5c89da(0x133)]=_0x5bd716[_0x5c89da(0x122)]['setor'],_0x14187c[_0x5c89da(0x11d)]='',_0x14187c[_0x5c89da(0x141)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x141)],_0x14187c[_0x5c89da(0x102)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x102)],_0x14187c['gv2']=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x157)],_0x14187c[_0x5c89da(0x137)]=_0x5bd716['body'][_0x5c89da(0x137)],_0x14187c['gv4']=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0xe8)],_0x14187c['gv5']=_0x5bd716['body'][_0x5c89da(0x151)],_0x14187c[_0x5c89da(0x148)]=_0x5bd716[_0x5c89da(0x122)]['gv6'],_0x14187c['gv7']=_0x5bd716['body']['gv7'],_0x14187c['gv8']=_0x5bd716[_0x5c89da(0x122)]['gv8'],_0x28a8ee['render']('admin/editar',{'error':_0x4a6a45,'usuario':_0x14187c});}else{if(_0x4e6841['rfid']==_0x5bd716['body'][_0x5c89da(0x141)]){_0x4a6a45[_0x5c89da(0xf8)]({'texto':_0x5c89da(0x11a)});var _0x14187c=new Schema({'_id':{'type':String},'nome':{'type':String},'setor':{'type':String},'login':{'type':String},'rfid':{'type':String}});_0x14187c[_0x5c89da(0x135)]=_0x5bd716[_0x5c89da(0x122)]['id'],_0x14187c[_0x5c89da(0x13c)]=_0x5bd716[_0x5c89da(0x122)]['nome'],_0x14187c[_0x5c89da(0x133)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x133)],_0x14187c[_0x5c89da(0x11d)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x11d)],_0x14187c[_0x5c89da(0x141)]='',_0x14187c[_0x5c89da(0x102)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x102)],_0x14187c[_0x5c89da(0x157)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x157)],_0x14187c[_0x5c89da(0x137)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x137)],_0x14187c[_0x5c89da(0xe8)]=_0x5bd716['body'][_0x5c89da(0xe8)],_0x14187c[_0x5c89da(0x151)]=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x151)],_0x14187c['gv6']=_0x5bd716['body'][_0x5c89da(0x148)],_0x14187c['gv7']=_0x5bd716[_0x5c89da(0x122)][_0x5c89da(0x13d)],_0x14187c[_0x5c89da(0x129)]=_0x5bd716['body'][_0x5c89da(0x129)],_0x28a8ee[_0x5c89da(0x13f)]('admin/editar',{'error':_0x4a6a45,'usuario':_0x14187c});}}}else Usuario['findOne']({'_id':_0x5bd716['body']['id']})['then'](_0xd715=>{const _0x4f131e=_0x5c89da;_0xd715[_0x4f131e(0x13c)]=_0x5bd716[_0x4f131e(0x122)]['nome'],_0xd715[_0x4f131e(0x133)]=_0x5bd716[_0x4f131e(0x122)]['setor'],_0xd715[_0x4f131e(0x11d)]=_0x5bd716[_0x4f131e(0x122)][_0x4f131e(0x11d)],_0xd715[_0x4f131e(0x141)]=_0x5bd716['body']['rfid'],_0xd715[_0x4f131e(0x102)]=_0x5bd716['body'][_0x4f131e(0x102)],_0xd715[_0x4f131e(0x157)]=_0x5bd716['body']['gv2'],_0xd715[_0x4f131e(0x137)]=_0x5bd716['body'][_0x4f131e(0x137)],_0xd715['gv4']=_0x5bd716[_0x4f131e(0x122)][_0x4f131e(0xe8)],_0xd715['gv5']=_0x5bd716[_0x4f131e(0x122)][_0x4f131e(0x151)],_0xd715[_0x4f131e(0x148)]=_0x5bd716[_0x4f131e(0x122)][_0x4f131e(0x148)],_0xd715[_0x4f131e(0x13d)]=_0x5bd716['body'][_0x4f131e(0x13d)],_0xd715[_0x4f131e(0x129)]=_0x5bd716['body'][_0x4f131e(0x129)],_0x3d02cf==0x1?(_0xd715[_0x4f131e(0xfc)]=_0xd715[_0x4f131e(0xfc)],_0xd715['save']()[_0x4f131e(0x144)](()=>{const _0x46e571=_0x4f131e;_0x5bd716['flash']('success_msg',_0x46e571(0x113)),_0x28a8ee[_0x46e571(0x12b)](_0x46e571(0x15c));})[_0x4f131e(0x126)](_0x360593=>{const _0x1d3193=_0x4f131e;_0x5bd716['flash']('error_msg',_0x1d3193(0x15a)),_0x28a8ee[_0x1d3193(0x12b)](_0x1d3193(0x15c));})):(_0xd715[_0x4f131e(0xfc)]=_0x5bd716[_0x4f131e(0x122)][_0x4f131e(0xfc)],bcrypt[_0x4f131e(0x118)](0xa,(_0xa704d3,_0x449ab4)=>{const _0x1a4bf5=_0x4f131e;bcrypt[_0x1a4bf5(0x159)](_0xd715['senha'],_0x449ab4,(_0x36f111,_0x22e08f)=>{const _0xd13282=_0x1a4bf5;_0x36f111&&(_0x5bd716[_0xd13282(0x10c)](_0xd13282(0xf0),_0xd13282(0x15a)),_0x28a8ee[_0xd13282(0x12b)]('/')),_0xd715[_0xd13282(0xfc)]=_0x22e08f,_0xd715['save']()[_0xd13282(0x144)](()=>{const _0x13fba8=_0xd13282;_0x5bd716['flash'](_0x13fba8(0x114),_0x13fba8(0x113)),_0x28a8ee[_0x13fba8(0x12b)](_0x13fba8(0x15c));})[_0xd13282(0x126)](_0x1d242a=>{const _0x22c87c=_0xd13282;_0x5bd716[_0x22c87c(0x10c)]('error_msg',_0x22c87c(0x15a)),_0x28a8ee[_0x22c87c(0x12b)](_0x22c87c(0x15c));});});}));})[_0x5c89da(0x126)](_0x260a16=>{const _0x354c85=_0x5c89da;_0x5bd716['flash']('error_msg','Houve\x20um\x20erro\x20ao\x20editar\x20o\x20usuario'),console[_0x354c85(0x153)](_0x354c85(0xff)+_0x260a16),_0x28a8ee['redirect'](_0x354c85(0x15c));});});}),module[_0x111fac(0xfb)]=router;